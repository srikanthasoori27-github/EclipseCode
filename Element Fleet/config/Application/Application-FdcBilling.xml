<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Application PUBLIC "sailpoint.dtd" "sailpoint.dtd">
<Application connector="sailpoint.connector.JDBCConnector" featuresString="DISCOVER_SCHEMA, PROVISIONING, SYNC_PROVISIONING, DIRECT_PERMISSIONS, SEARCH, ENABLE, UNLOCK" icon="databaseIcon" name="FDC Billing" profileClass="" type="JDBC">
    <Attributes>
        <Map>
            <entry key="Group.SQL" value="SELECT DISTINCT&#13;&#10;accesstype +'/' + domainname  +'/' + applicationname AS &quot;Access&quot;,&#13;&#10;--    accesstype,  &#13;&#10;--  u.DomainID, Applid,  &#13;&#10;--    domainname,&#13;&#10;--    applicationname,&#13;&#10;    description&#13;&#10;FROM&#13;&#10;         %%ELE_FDC_BILLING_sqldev16b_ntsvr16b%%.billing.dbo.v_billingfdcuseraccess u&#13;&#10;    JOIN %%ELE_FDC_BILLING_sqldev16b_ntsvr16b%%.billing.dbo.usertype            n ON n.usertypeid = u.accesstypeid&#13;&#10;    JOIN %%ELE_FDC_BILLING_sqldev16b_ntsvr16b%%.billing.dbo.v_domainlist        dl ON dl.domainid = u.domainid&#13;&#10;    LEFT OUTER JOIN (  --- MSD User info --- For Audit &#13;&#10;        SELECT&#13;&#10;            u.userid,&#13;&#10;            username,&#13;&#10;            emailaddress,&#13;&#10;            windowsuseracct,&#13;&#10;            substring(username, 1, charindex(' ', username) - 1)                          AS firstname,&#13;&#10;            substring(username, charindex(' ', username) + 1, len(username))              AS lastname&#13;&#10;        FROM&#13;&#10;            %%ELE_FDC_BILLING_ntsvr3a_temp_ntsvr3a%%.systemceicmaxdb.dbo.userrec        u&#13;&#10;            LEFT OUTER JOIN %%ELE_FDC_BILLING_ntsvr3a_temp_ntsvr3a%%.systemceicmaxdb.dbo.access         a ON a.userid = u.userid&#13;&#10;        WHERE&#13;&#10;            u.rectype = 'U'&#13;&#10;    )                                        a1 ON a1.windowsuseracct = u.username    &#13;&#10;     ---- Last Login &#13;&#10;    LEFT OUTER JOIN (&#13;&#10;        SELECT&#13;&#10;            lastupdateby,&#13;&#10;            MAX(lastupdatedate) AS fdclastupddate&#13;&#10;        FROM&#13;&#10;            %%ELE_FDC_BILLING_sqldev16b_ntsvr16b%%.billing.dbo.fdcbatchitem fbi&#13;&#10;        GROUP BY&#13;&#10;            lastupdateby&#13;&#10;    )                                        lt ON lt.lastupdateby = windowsuseracct&#13;&#10;WHERE&#13;&#10;    u.domainid IN ( 2, - 1, 1 )&#13;&#10;    AND applid IN ( 1, 2 )&#13;&#10;    AND isnull(windowsuseracct, ' ') &lt;&gt; ' ';"/>
            <entry key="Group.aggregationMode">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Group.deltaTable"/>
            <entry key="Group.driverClass" value="%%ELE_FDC_BILLING_DB_DRIVER%%"/>
            <entry key="Group.getDeltaSQL"/>
            <entry key="Group.getDirectPermObjectSQL"/>
            <entry key="Group.getObjectSQL"/>
            <entry key="Group.isPermissionEnabled">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Group.mergeRows">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Group.password" value="%%ELE_MS_SQL_SVC_ACCOUNT_PWD%%"/>
            <entry key="Group.url" value="%%ELE_FDC_BILLING_DB_URL%%"/>
            <entry key="Group.useExecuteQuery">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Group.useStoredProcedureDelta">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Group.useStoredProcedureDirectPermission">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Group.useStoredProcedureGetObject">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Group.useStoredProcedureSqlStmt">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Group.user" value="%%ELE_MS_SQL_SVC_ACCOUNT%%"/>
            <entry key="Profiles.aggregationMode">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Profiles.isPermissionEnabled">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Profiles.mergeRows">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Profiles.useExecuteQuery">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Profiles.useStoredProcedureDelta">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Profiles.useStoredProcedureDirectPermission">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Profiles.useStoredProcedureGetObject">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="Profiles.useStoredProcedureSqlStmt">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="SQL" value="SELECT DISTINCT&#13;&#10;RTRIM(firstname+'\'+ emailaddress) as &quot;Firstname\Email&quot;,&#13;&#10;    RTRIM(firstname) as firstname,&#13;&#10;     RTRIM(lastname) as lastname,&#13;&#10;     RTRIM(emailaddress) as emailaddress,&#13;&#10;     RTRIM(lt.fdclastupddate) as fdclastupddate,&#13;&#10;--    accesstype,&#13;&#10;     RTRIM(accesstype +'/' + domainname  +'/' + applicationname) AS &quot;Access&quot;&#13;&#10;--  u.DomainID, Applid,&#13;&#10;--    domainname,&#13;&#10;--    applicationname&#13;&#10;FROM&#13;&#10;         %%ELE_FDC_BILLING_sqldev16b_ntsvr16b%%.billing.dbo.v_billingfdcuseraccess u&#13;&#10;    JOIN %%ELE_FDC_BILLING_sqldev16b_ntsvr16b%%.billing.dbo.usertype            n ON n.usertypeid = u.accesstypeid&#13;&#10;    JOIN %%ELE_FDC_BILLING_sqldev16b_ntsvr16b%%.billing.dbo.v_domainlist        dl ON dl.domainid = u.domainid&#13;&#10;    LEFT OUTER JOIN (  --- MSD User info --- For Audit&#13;&#10;        SELECT&#13;&#10;            u.userid,&#13;&#10;            username,&#13;&#10;            emailaddress,&#13;&#10;            windowsuseracct,&#13;&#10;            substring(username, 1, charindex(' ', username) - 1)                          AS firstname,&#13;&#10;            substring(username, charindex(' ', username) + 1, len(username))              AS lastname&#13;&#10;        FROM&#13;&#10;            %%ELE_FDC_BILLING_ntsvr3a_temp_ntsvr3a%%.systemceicmaxdb.dbo.userrec        u&#13;&#10;            LEFT OUTER JOIN %%ELE_FDC_BILLING_ntsvr3a_temp_ntsvr3a%%.systemceicmaxdb.dbo.access         a ON a.userid = u.userid&#13;&#10;        WHERE&#13;&#10;            u.rectype = 'U'&#13;&#10;    )                                         a1 ON a1.windowsuseracct = u.username  &#13;&#10;     ---- Last Login&#13;&#10;    LEFT OUTER JOIN (&#13;&#10;        SELECT&#13;&#10;            lastupdateby,&#13;&#10;            MAX(lastupdatedate) AS fdclastupddate&#13;&#10;        FROM&#13;&#10;            %%ELE_FDC_BILLING_sqldev16b_ntsvr16b%%.billing.dbo.fdcbatchitem fbi&#13;&#10;        GROUP BY&#13;&#10;            lastupdateby&#13;&#10;    )                                         lt ON lt.lastupdateby = windowsuseracct&#13;&#10;WHERE&#13;&#10;    u.domainid IN ( 2, - 1, 1 )&#13;&#10;    AND applid IN ( 1, 2 )&#13;&#10;    AND isnull(windowsuseracct, ' ') &lt;&gt; ' '&#13;&#10;order by &quot;Firstname\Email&quot;;"/>
            <entry key="acctAggregationEnd">
                <value>
                    <Date>1615563053303</Date>
                </value>
            </entry>
            <entry key="acctAggregationStart">
                <value>
                    <Date>1615563052862</Date>
                </value>
            </entry>
            <entry key="afterProvisioningRule"/>
            <entry key="aggregationMode">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="beforeProvisioningRule"/>
            <entry key="compositeDefinition"/>
            <entry key="deltaTable"/>
            <entry key="disableOrderingCheck" value="true"/>
            <entry key="driverClass" value="%%ELE_FDC_BILLING_DB_DRIVER%%"/>
            <entry key="getDeltaSQL"/>
            <entry key="indexColumns">
                <value>
                    <List>
                        <String>Firstname\Email</String>
                    </List>
                </value>
            </entry>
            <entry key="isPermissionEnabled">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="jdbcExceptionBucketing">
                <value>
                    <Boolean>true</Boolean>
                </value>
            </entry>
            <entry key="mergeColumns">
                <value>
                    <List>
                        <String>Access</String>
                    </List>
                </value>
            </entry>
            <entry key="mergeRows">
                <value>
                    <Boolean>true</Boolean>
                </value>
            </entry>
            <entry key="nativeChangeDetectionAttributeScope" value="entitlements"/>
            <entry key="nativeChangeDetectionAttributes"/>
            <entry key="nativeChangeDetectionEnabled">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="nativeChangeDetectionOperations"/>
            <entry key="partitionMode">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="partitionStatements"/>
            <entry key="password" value="%%ELE_MS_SQL_SVC_ACCOUNT_PWD%%"/>
            <entry key="provisionRule" value="globalRule"/>
            <entry key="sysDescriptions">
                <value>
                    <Map>
                        <entry key="en_US"/>
                    </Map>
                </value>
            </entry>
            <entry key="templateApplication" value="JDBC Template"/>
            <entry key="testConnSQL" value="select * from %%ELE_FDC_BILLING_sqldev16b_ntsvr16b%%.Billing.dbo.USERType;"/>
            <entry key="url" value="%%ELE_FDC_BILLING_DB_URL%%"/>
            <entry key="useExecuteQuery">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="useStoredProcedureDelta">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="useStoredProcedureDirectPermission">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="useStoredProcedureGetObject">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="useStoredProcedurePartition">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="useStoredProcedureSqlStmt">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="useStoredProcedureTestConn">
                <value>
                    <Boolean/>
                </value>
            </entry>
            <entry key="user" value="%%ELE_MS_SQL_SVC_ACCOUNT%%"/>
        </Map>
    </Attributes>
    <CorrelationRule>
        <Reference class="sailpoint.object.Rule" name="ELE_Global_Correlation_Rule"/>
    </CorrelationRule>
    <CreationRule>
        <Reference class="sailpoint.object.Rule" name="ELE_Global_IdentityCreation_Rule"/>
    </CreationRule>
    <Owner>
        <Reference class="sailpoint.object.Identity" name="spadmin"/>
    </Owner>
    <Schemas>
        <Schema displayAttribute="emailaddress" identityAttribute="Firstname\Email" instanceAttribute="" nativeObjectType="account" objectType="account" permissionsRemediationModificationType="None">
            <AttributeDefinition name="Firstname\Email" type="string">
                <Description/>
            </AttributeDefinition>
            <AttributeDefinition name="firstname" type="string">
                <Description/>
            </AttributeDefinition>
            <AttributeDefinition name="lastname" type="string">
                <Description/>
            </AttributeDefinition>
            <AttributeDefinition name="emailaddress" type="string">
                <Description/>
            </AttributeDefinition>
            <AttributeDefinition name="fdclastupddate" type="string">
                <Description/>
            </AttributeDefinition>
            <AttributeDefinition entitlement="true" managed="true" multi="true" name="Access" schemaObjectType="Group" type="string">
                <Description/>
            </AttributeDefinition>
        </Schema>
        <Schema aggregationType="group" descriptionAttribute="description" displayAttribute="Access" identityAttribute="Access" instanceAttribute="" nativeObjectType="Group" objectType="Group" permissionsRemediationModificationType="None">
            <AttributeDefinition name="Access" type="string">
                <Description/>
            </AttributeDefinition>
            <AttributeDefinition name="description" type="string">
                <Description/>
            </AttributeDefinition>
        </Schema>
    </Schemas>
    <ApplicationScorecard/>
</Application>