<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
  "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
  "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd" [
  <!ENTITY SailPointObject SYSTEM "classpath://sailpoint/object/SailPointObject.hbm.xml">
]>

<!-- (c) Copyright 2008 SailPoint Technologies, Inc., All Rights Reserved. -->

<hibernate-mapping>
  <class name="sailpoint.object.IdentitySnapshot">

    &SailPointObject;
    <!-- these may have names, but they are not unique keys -->
    <property name="name" type="string" length="128"/>

    <property name="identityId" index="spt_identity_id"/>
    <property name="identityName" index="spt_idsnap_id_name"/>
    <property name="summary" length="2000"/>
    <property name="differences" length="2000"/>

    <!-- 
      Since application names can be long, this needs some heft as well,
      In theory it could need to be a BLOB but then we couldn't search
      on it.  Assume for now that the LCD max varchar (4000 on Oracle) 
      is enough, will need to truncate.  
      Ugh, SQLServer has a total row limit of 8060, with this at 4000
      the reported size was 9077.  Drop this down to 2000, but we'll
      probably need to raise this and push some of the others like
      summary and differences into a blob.  Do we really need to 
      search on this?  
    -->
    <property name="applications" length="2000"/>

    <!-- Note that length must be specified greater than 16777216 to 
         get MySQL to use a longtext column.  Below that and above
         65536 it will use a mediumtext.  We could probably live
         with 16M for our XML.
    -->
    <property name="scorecard" type="sailpoint.persistence.XmlType" length="100000000"/>
    <property name="attributes" type="sailpoint.persistence.XmlType" length="100000000"/>
    <property name="bundles" type="sailpoint.persistence.XmlType" length="100000000"/>
    <property name="exceptions" type="sailpoint.persistence.XmlType" length="100000000"/>
    <property name="links" type="sailpoint.persistence.XmlType" length="100000000"/>
    <property name="violations" type="sailpoint.persistence.XmlType" length="100000000"/>
    <property name="assignedRoles" type="sailpoint.persistence.XmlType" length="100000000"/>

  </class>
</hibernate-mapping>
