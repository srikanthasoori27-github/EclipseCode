<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<!-- (c) Copyright 2008 SailPoint Technologies, Inc., All Rights Reserved. -->

<hibernate-mapping>
  <union-subclass name="sailpoint.object.CertificationEntity"
                  extends="sailpoint.object.AbstractCertificationItem"
                  dynamic-update="true" dynamic-insert="true">  

     <property name="type">
      <type name="sailpoint.persistence.EnumType">
        <param name="enumClassName">sailpoint.object.CertificationEntity$Type</param>
      </type>
    </property>

    <property name="bulkCertified" type="boolean" />

    <property name="attributes" type="sailpoint.persistence.XmlType" length="100000000"/>

    <!-- Identity certification properties -->
    <property name="identity" column="identityId" index="spt_cert_entity_identity" length="450"/>
    <property name="firstname" index="spt_cert_entity_firstname_ci"/>
    <property name="lastname" index="spt_cert_entity_lastname_ci"/>
    <property name="compositeScore" index="spt_cert_entity_cscore"/>
    <property name="snapshotId"/>
    <property name="differences" type="sailpoint.persistence.XmlType" length="100000000"/>
    <property name="newUser" type="boolean" index="spt_cert_entity_new_user" />

    <!-- Account group cert properties -->
    <property name="accountGroup" column="accountGroup" length="450"/>
    <property name="application" column="application"/>
    <property name="nativeIdentity" column="nativeIdentity" type="string" length="322"/>
    <property name="referenceAttribute" column="referenceAttribute"/>
    <property name="schemaObjectType" column="schemaObjectType"/>

    <list name="items" cascade="all">
      <key column="certification_entity_id"/>
      <list-index column="idx"/>
      <one-to-many class="sailpoint.object.CertificationItem"/>
    </list>

    <many-to-one embed-xml="false" name="certification"
                 class="sailpoint.object.Certification"
                 column="certification_id"/>

    <!-- Make it a String rather than a formal reference so we don't have
         to pay for FK relationships -->
    <property name="pendingCertification" length="32" index="spt_cert_entity_pending"/>
    
  </union-subclass>
</hibernate-mapping>
