<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
  "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
  "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd" [
  <!ENTITY SailPointObject SYSTEM "classpath://sailpoint/object/SailPointObject.hbm.xml">
]>

<!-- (c) Copyright 2008 SailPoint Technologies, Inc., All Rights Reserved. -->

<hibernate-mapping>

  <typedef name="ruleCalloutEnum" class="sailpoint.persistence.EnumType">
    <param name="enumClassName">sailpoint.object.RuleRegistry$Callout</param>
  </typedef>

  <class name="sailpoint.object.RuleRegistry">

    &SailPointObject;
    <property name="name" type="string" length="128" unique="true" not-null="true"/>

    <!-- See bug 423 about why the key column has a max length of 78. -->
    <map name="registry" table="RULE_REGISTRY_CALLOUTS">
      <key column="RULE_REGISTRY_ID"/>
      <map-key type="ruleCalloutEnum" length="78" column="CALLOUT"/>
      <many-to-many column="RULE_ID" class="sailpoint.object.Rule"/>
    </map>
    
    <property name="templates" type="sailpoint.persistence.ListXmlType" length="100000000"/>

  </class>

</hibernate-mapping>
