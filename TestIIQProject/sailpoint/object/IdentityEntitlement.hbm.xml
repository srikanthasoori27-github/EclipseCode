<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
  "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
  "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd" [
  <!ENTITY SailPointObjectChild SYSTEM "classpath://sailpoint/object/SailPointObjectChild.hbm.xml">
  <!ENTITY IndexBase "identity_ent">
  <!ENTITY PersistentIdentityItem SYSTEM "classpath://sailpoint/object/PersistentIdentityItem.hbm.xml">
]>

<!-- (c) Copyright 2008 SailPoint Technologies, Inc., All Rights Reserved. -->

<hibernate-mapping>
  <class name="sailpoint.object.IdentityEntitlement" dynamic-update="true" dynamic-insert="true">  
    &SailPointObjectChild;
    &PersistentIdentityItem;
    
    <many-to-one embed-xml="false" name="application" class="sailpoint.object.Application"/>    
   
    <many-to-one embed-xml="false" name="identity" class="sailpoint.object.Identity" 
                 column="identityId" not-null="true"/>    
                 
    <property name="aggregationState" index="spt_&IndexBase;_ag_state">
      <type name="sailpoint.persistence.EnumType">
        <param name="enumClassName">sailpoint.object.IdentityEntitlement$AggregationState</param>
      </type>
    </property>

    <property name="source" type="string" length="64" index='spt_&IndexBase;_source_ci'/>
    <property name="assigned" type="boolean" index="spt_&IndexBase;_assigned"/>
    <property name="allowed" type="boolean" index="spt_&IndexBase;_allowed"/>
    <property name="grantedByRole" type="boolean" index="spt_&IndexBase;_role_granted"/>
    
    <property name="assigner" type="string" length="128"/>

    <property name="assignmentId" type="string" length="64" index="spt_&IndexBase;_assgnid" />
    <property name="assignmentNote" type="string" length="1024" />

      <!-- Need to change this to string instead of Enum -->
    <property name="type" index="spt_&IndexBase;_type">
      <type name="sailpoint.persistence.EnumType">
        <param name="enumClassName">sailpoint.object.ManagedAttribute$Type</param>
      </type>
    </property>
    	
    <many-to-one embed-xml="false" name="requestItem"
                 class="sailpoint.object.IdentityRequestItem"
                 column="request_item"/>
                 
    <many-to-one embed-xml="false" name="pendingRequestItem"
                 class="sailpoint.object.IdentityRequestItem"
                 column="pending_request_item"/>
       
    <many-to-one embed-xml="false" name="certificationItem"
                 class="sailpoint.object.CertificationItem"
                 column="certification_item"/>
                 
    <many-to-one embed-xml="false" name="pendingCertificationItem"
                 class="sailpoint.object.CertificationItem"
                 column="pending_certification_item"/>
                 
  </class>
</hibernate-mapping>
