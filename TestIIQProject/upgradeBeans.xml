<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN"
        "http://www.springframework.org/dtd/spring-beans-2.0.dtd">

<!-- (c) Copyright 2008 SailPoint Technologies, Inc., All Rights Reserved. -->

<!--
  Bean definitions for running 'iiq upgrade'.  This needs only a database connection.
-->

<beans default-autowire="byName" default-lazy-init="false" >

    <!-- data source, properties expected to be in iiq.properties -->
    <bean id="dataSource" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close"/>

    <bean id="propertyOverrider" class="sailpoint.server.SpringPropertyOverrider">
      <property name="location" value="iiq.properties"/>
    </bean>

    <!-- Set the datasource on the Upgrader. -->
    <bean class="sailpoint.server.upgrade.Upgrader">
      <property name="dataSource">
        <ref bean="dataSource" />
      </property>
    </bean>
    
</beans>
